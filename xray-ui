#!/usr/bin/python3

import os
from MyJira import MyJira
from MyJiraConfig import MyJiraConfig
from JiraXrayIssue import JiraXrayIssue
from TkTableUi import TkTableUi
import webbrowser
import json
import os

class XrayUi:
    config_file = MyJiraConfig()

    def __init__(self):
        config = self.config_file.load()
        jira_config = config.get('jira')
        self.jira = MyJira(jira_config)
        team_name = jira_config.get('team_name')
        self.ui = TkTableUi("Current Sprint for " + team_name)
        self.ui.add_headers(('PBI', 'Summary'))

    def display(self):
        issues = self.jira.get_sprint_issues()
        for issue in issues:
            self.ui.add_row((issue.key, issue.fields.summary))
        self.ui.display()

if __name__ == "__main__":
    xray_ui = XrayUi()
    xray_ui.display()

